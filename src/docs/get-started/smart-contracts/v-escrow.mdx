<!-- KEYWORDS: V Escrow Smart Contract -->

# V Escrow Contract

## Introduction

The V Escrow contract allows two parties to do transactions with one another if they have mutual trust in a third party. It is expected that the third party will be a large trusted entity that receives fees for facilitating transactions between parties.

A simple example would be the delivery of a physical object where the recipient pays using cryptocurrencies. Once the delivery has been made, the trusted third party can review the evidence of the shipping/mailing and distribute the funds accordingly.

## Implementation

The Judge should register the V Escrow Contract, and decides the token the funds will be paid in, and how long the recipient and judge are allowed to take for their actions.

The Payer will create the order and decides the amount to pay the recipient, the fee that the judge receives, and also the penalties for all the parties if they do not perform their actions within the allocated time.

## Using the VSYS Python API Wrapper pyvsystems

To generate and broadcast transactions, we can use <mark>pyvsystems</mark> to test contract functionalities on vsys chain.

### Install pyvsystems

**pyvsystems** can be installed by first cloning the github repository.

```python:
git clone https://github.com/virtualeconomy/pyvsystems.git
```

Then using pip, we can install the repository as a package.

```python:
pip3 install pyvsystems/.
```

Now you can import pyvsystems in your own workplace.


## Register a V Escrow contract

### Initialize the API Connection

```
import pyvsystems as pv
from pyvsystems import Account
from pyvsystems.contract import token_id_from_contract_id
from pyvsystems.contract_helper import *

custom_wrapper = pv.create_api_wrapper("<your_node_address>", api_key="<your_node_api_key (optional)>")
# chain = pv.Chain(chain_name='mainnet', chain_id='M', address_version=5, api_wrapper=custom_wrapper)
chain = pv.Chain(chain_name='testnet', chain_id='T', address_version=5, api_wrapper=custom_wrapper)
judge = Account(chain=chain, seed="<your judge seed>")
payer = Account(chain=chain, seed="<your payer seed>")
recipient = Account(chain=chain, seed="<your recipient seed>")
```

V Escrow Contract ByteString:

```
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
```

<br/>

| **Triggers** 	|              **Input**             	|          **Input Types**         	| **Description** 	|
|:------------:	|:----------------------------------:	|:--------------------------------:	|:---------------:	|
|     Init     	| (tokenId, duration, judgeDuration) 	| (token_id, timestamp, timestamp) 	|                 	|

<br/>

```
v_stable_swap_helper = VEscrowContractHelper()
token_without_split_helper = TokenWithoutSplitContractHelper()

token_contract_id = "<your token contract id>"
token_id = "<your token id>"

register_v_escrow_data_stack = v_escrow_helper.register_data_stack_generator(token_id, 60000000000, 60000000000)

judge.register_contract(v_escrow_helper.contract_object, register_v_escrow_data_stack)
```

<br/>

## Using V Escrow Contract Functions

<br/>
| **Executable Functions** 	| **Function ID** 	|                                 **Inputs**                                 	|        **Input Types**        	|                                                                                                               **Description**                                                                                                              	|
|:------------------------:	|:---------------:	|:--------------------------------------------------------------------------:	|:-----------------------------:	|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:	|
|         Supersede        	|        0        	|                                 (newJudge)                                 	|         (short_bytes)         	|                                                                                                    Give judge rights to another address                                                                                                    	|
|          Create          	|        1        	| (recipient, amount, repDeposit, judgeDeposit, fee, refund, expirationTime) 	|         (short_bytes)         	|                                                                                                            Create a Escrow Order                                                                                                           	|
|     Recipient Deposit    	|        2        	|                                  (orderId)                                 	|         (short_bytes)         	|                                                                                                Recipient deposits repDeposit into the order                                                                                                	|
|       Judge Deposit      	|        3        	|                                  (orderId)                                 	|         (short_bytes)         	|                                                                                                 Judge deposits judgeDeposit into the order                                                                                                 	|
|       Payer Cancel       	|        4        	|                                  (orderId)                                 	|         (short_bytes)         	|                                                                                                           Payer cancels the order                                                                                                          	|
|     Recipient Cancel     	|        5        	|                                  (orderId)                                 	|         (short_bytes)         	|                                                                                                         Recipient cancels the order                                                                                                        	|
|       Judge Cancel       	|        6        	|                                  (orderId)                                 	|         (short_bytes)         	|                                                                                                           Judge cancels the order                                                                                                          	|
|        Submit Work       	|        7        	|                                  (orderId)                                 	|         (short_bytes)         	|                                                                               Recipient submits work (evidence should be provided that the work is complete)                                                                               	|
|       Approve Work       	|        8        	|                                  (orderId)                                 	|         (short_bytes)         	|                                                                                               Payer approves work and agreed amounts are paid                                                                                              	|
|      Apply to Judge      	|        9        	|                                  (orderId)                                 	|         (short_bytes)         	|                                                                                  Payer does not approve of the work, and asks the Judge to judge the work                                                                                  	|
|           Judge          	|        10       	|                   (orderId, payerAmount, recipientAmount)                  	| (short_bytes, amount, amount) 	|                                                                                     Judge the work and decide how much the payer and recipient receives                                                                                    	|
|      Submit Penalty      	|        11       	|                                  (orderId)                                 	|         (short_bytes)         	|                                If the recipient does not submit work at expirationTime, the payer can submit penalty. The payer will obtain the repDeposit and amount, and the Judge will still get the fee                                	|
|       Payer Refund       	|        12       	|                                  (orderId)                                 	|         (short_bytes)         	|   If the Judge does not judge the work within the time limit after the apply to judge function, then payer can refund. The Judge loses his deposit amount, and the Payer receives the refundAmount, and the recipient receives the rest.   	|
|     Recipient Refund     	|        13       	|                                  (orderId)                                 	|         (short_bytes)         	| If the Judge does not judge the work within the time limit after the apply to judge function, then recipient can refund. The Judge loses his deposit amount, and the Payer receives the refundAmount, and the recipient receives the rest. 	|
|          Collect         	|        14       	|                                  (orderId)                                 	|         (short_bytes)         	|        If the work has been submitted and the payer does not approve work or apply to judge within time limit, then recipient can collect, obtaining the order amount and recipient locked funds, The Judge gets judgeLocked and fee       	|
<br/>

**Deposit Into the V Escrow Contract**
```
judge_deposit_data_stack = token_without_split_helper.deposit_data_stack_generator(judge.address, v_escrow_contract_id, <your judge deposit amount>)
payer_deposit_data_stack = token_without_split_helper.deposit_data_stack_generator(payer.address, v_escrow_contract_id, <your payer deposit amount>)
recipient_deposit_data_stack = token_without_split_helper.deposit_data_stack_generator(recipient.address, v_escrow_contract_id, <your recipient deposit amount>)

judge.execute_contract(token_contract_id, system_helper.deposit_function_index, judge_deposit_data_stack)
payer.execute_contract(token_contract_id, system_helper.deposit_function_index, payer_deposit_data_stack)
recipient.execute_contract(token_contract_id, system_helper.deposit_function_index, recipient_deposit_data_stack)
```
<br/>

**Create Order**
```
create_order_data_stack = v_escrow_helper.create_order_data_stack_generator(recipient.address, <your amount>, <your recipient order deposit>, <your judge order deposit>, <your judge fee>, <your refund amount>, <your expiration timestamp>)

payer.execute_contract(v_escrow_contract_id, v_escrow_helper.create_order_function_index, create_order_data_stack)

order_id = "<your order id>"
```
<br/>

**Deposit to Order**
```
recipient_escrow_deposit_data_stack = v_escrow_helper.recipient_deposit_data_stack_generator(order_id)

recipient.execute_contract(v_escrow_contract_id, v_escrow_helper.recipient_deposit_function_index, recipient_escrow_deposit_data_stack)

judge_escrow_deposit_data_stack = v_escrow_helper.judge_deposit_data_stack_generator(order_id)

judge.execute_contract(v_escrow_contract_id, v_escrow_helper.judge_deposit_function_index, judge_escrow_deposit_data_stack)
```
<br/>

**Cancel Order**

Cancel if anyone does not agree to the order.

```
payer_cancel_data_stack = v_escrow_helper.payer_cancel_data_stack_generator(order_id)

payer.execute_contract(v_escrow_contract_id, v_escrow_helper.payer_cancel_function_index, payer_cancel_data_stack)

recipient_cancel_data_stack = v_escrow_helper.recipient_cancel_data_stack_generator(order_id)

recipient.execute_contract(v_escrow_contract_id, v_escrow_helper.recipient_deposit_function_index, recipient_cancel_data_stack)

judge_cancel_data_stack = v_escrow_helper.judge_cancel_data_stack_generator(order_id)

judge.execute_contract(v_escrow_contract_id, v_escrow_helper.judge_cancel_function_index, judge_cancel_data_stack)
```
<br/>

**Submit Work**

```
submit_work_data_stack = v_escrow_helper.submit_work_data_stack_generator(order_id)

recipient.execute_contract(v_escrow_contract_id, v_escrow_helper.submit_work_function_index, submit_work_data_stack)
```
<br/>


**Approve Work**

```
approve_work_data_stack = v_escrow_helper.approve_work_data_stack_generator(order_id)

payer.execute_contract(v_escrow_contract_id, v_escrow_helper.approve_work_function_index, approve_work_data_stack)
```
<br/>

**Apply to Judge**

```
apply_to_judge_data_stack = v_escrow_helper.apply_to_judge_data_stack_generator(order_id)

payer.execute_contract(v_escrow_contract_id, v_escrow_helper.apply_to_judge_function_index, apply_to_judge_data_stack)
```
<br/>

**Judge Order**

```
judge_order_data_stack = v_escrow_helper.judge_order_data_stack_generator(order_id, <your payer amount>, <your recipient amount>)

judge.execute_contract(v_escrow_contract_id, v_escrow_helper.judge_order_function_index, judge_order_data_stack)
```
<br/>

**Submit Penalty**

```
submit_penalty_data_stack = v_escrow_helper.submit_penalty_data_stack_generator(order_id)

payer.execute_contract(v_escrow_contract_id, v_escrow_helper.submit_penalty_function_index, submit_penalty_data_stack)
```
<br/>

**Payer Refund**

```
payer_refund_data_stack = v_escrow_helper.payer_refund_data_stack_generator(order_id)

payer.execute_contract(v_escrow_contract_id, v_escrow_helper.payer_refund_function_index, payer_refund_data_stack)
```
<br/>

**Recipient Refund**

```
recipient_refund_data_stack = v_escrow_helper.recipient_refund_data_stack_generator(order_id)

recipient.execute_contract(v_escrow_contract_id, v_escrow_helper.recipient_refund_function_index, recipient_refund_data_stack)
```
<br/>




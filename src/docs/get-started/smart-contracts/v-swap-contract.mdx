import 'katex/dist/katex.min.css';
import { InlineMath } from 'react-katex';
import vswapFlow from "./v_swap_flow.png";
import image001 from "./swap_exact_token_for_target_token.png";
import image002 from "./swap_token_for_exact_target_token.png";
import image003 from "./swap_exact_token_for_base_token.png";
import image004 from "./swap_token_for_exact_base_token.png";

<!-- KEYWORDS: V Swap Contract Smart Contract -->

# V Swap Contract


## Introduction

V Swap is an automated market making protocol. Prices are regulated by a constant product formula, and requires no action from the liquidity provider to maintain prices.

The contract allows completely decentralised exchanges to be formed, and allows anyone to be a liquidity provider as long as they have tokens on both sides of the swap.


## Implementation

The liquidity provided is tracked by a token called the liquidity token. The pool will give liquidity tokens according to the proportion of liquidity provided. These liquidity tokens should first be registered and completely issued before the liquidity pool is created.

The user who first creates the pool decides on an initial ratio, and the pool will create:
<br/>
<InlineMath math="number\_of\_minted\_liquidity\_tokens = \sqrt{\smash[b]{x}*{y}}"/>
<br/><br/>


number of liquidity tokens and give it to the liquidity provider.

Where x is the number of base tokens initially placed into the pool

And y is the number of target tokens initially placed into the pool

Subsequent liquidity providers will obtain liquidity tokens equal to
<br/>
<InlineMath math="number\_of\_minted\_liquidity\_tokens = \frac{({\smash[b]{a}*{b}}) * TotalLiquiditySupply}{x + y}"/>
<br/><br/>


Where a is the number of base tokens stored to the pool

And b is the number of target tokens stored to the pool


**A flow chart of the V Swap Contract is as follows:**

<img style={{ width: '100%'}} src={vswapFlow} />


The price of the swap is dependent on how many tokens are within the pool. By using an invariant, the price can be regulated automatically without the liquidity provider constantly updating the price.

<br/>
<InlineMath math="pool\_token\_A\_amount * pool\_token\_B\_amount = k"/>
<br/><br/>

It's important to note that the pool also takes 0.3% of the trade as fees.


## Tutorial

For the tutorials, you can check the documentations for the token contracts of SDKs.

- [Python SDK](https://github.com/virtualeconomy/py-vsys/tree/main/doc/smart_contract)

- [Javascript SDK](https://github.com/virtualeconomy/js-vsys/tree/main/doc/smart_contract)